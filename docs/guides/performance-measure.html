<!DOCTYPE html>
<html>





<head>
  <title>パフォーマンスの測定 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src https://dpm.demdex.net; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com https://static.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com https://app.mailjet.com http://www.youtube.com http://www.googleadservices.com https://googleads.g.doubleclick.net https://dpm.demdex.net https://giscus.app; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self'; frame-src https://www.googletagmanager.com https://www.youtube.com https://embed.restream.io https://app.mailjet.com https://giscus.app; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/guides/performance-measure" />
  <meta property="og:title" content="パフォーマンスの測定" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/performance-measure">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/guides/performance-measure" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/guides/performance-measure" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/guides/performance-measure" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/guides/performance-measure" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  

<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
    </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Quarkusとは <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/continuum" class="">リアクティブ</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">学ぶ<i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ガイド</a></li>
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">コミュニティ <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="/publications" class="">出版物</a></li>
          <li><a href="/awards" class="">受賞</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/guides/performance-measure" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://es.quarkus.io/guides/performance-measure">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/guides/performance-measure">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/guides/performance-measure">日本語</a></li>
          </ul>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    



<div class="full-width-version-bg grey align-self">
  <div class="grid-wrapper">
    <div class="grid__item width-6-12">
      <p class="returnlink"><i class="fas fa-angle-left"></i><a href="/guides/">ガイド一覧に戻る</a></p>
    </div>
    <div class="grid__item width-6-12 align-self-center text-right hide-mobile">
      <label id="guide-version-label">ガイドのバージョンを選択</label>
      <select id="guide-version-dropdown">
        
      
        
        
        
        
          
        <option value="main" >Main - SNAPSHOT</option>
        
        
      
        
        
        
        
          
        <option value="latest" selected>2.12 - Latest</option>
        
        
      
        
        
        
        
          
        <option value="2.7" >2.7</option>
        
        
      
        
        
        
        
          
        <option value="2.2" >2.2</option>
        
        
      
        
        
        
        
          
        <option value="1.11" >1.11</option>
        
        
      
    
      </select>
    </div>
  </div>
</div>

<div class="grid-wrapper guide">
  <div class="grid__item width-12-12 width-12-12-mobile">
    <h1 class="text-caps">パフォーマンスの測定 </h1>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#メモリ使用量の測定方法">メモリ使用量の測定方法</a>
<ul class="sectlevel2">
<li><a href="#ネイティブメモリのトラッキング">ネイティブメモリのトラッキング</a></li>
<li><a href="#クラウドネイティブのメモリ制限">クラウドネイティブのメモリ制限</a></li>
<li><a href="#docker上でメモリを正しく測定する">Docker上でメモリを正しく測定する</a></li>
<li><a href="#プラットフォーム固有のメモリレポート">プラットフォーム固有のメモリレポート</a></li>
</ul>
</li>
<li><a href="#起動時間の測定方法">起動時間の測定方法</a></li>
<li><a href="#quarkusで適用される追加フラグ">Quarkusで適用される追加フラグ</a>
<ul class="sectlevel2">
<li><a href="#フォールバックイメージの無効化">フォールバックイメージの無効化</a></li>
<li><a href="#分離の無効化">分離の無効化</a></li>
<li><a href="#すべてのサービスローダー実装の自動登録を無効にする">すべてのサービスローダー実装の自動登録を無効にする</a></li>
<li><a href="#ガベージコレクション実装のためのより良いデフォルト値">ガベージコレクション実装のためのより良いデフォルト値</a></li>
<li><a href="#その他">その他&#8230;&#8203;</a></li>
</ul>
</li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このガイドでは以下をカバーしています:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>メモリ使用量の測定方法</p>
</li>
<li>
<p>起動時間の測定方法</p>
</li>
<li>
<p>Quarkusがデフォルトでネイティブイメージに適用する追加フラグ</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>すべてのテストは、バッチに対して同じハードウェアで実行しています。言うまでもないことですが、言うべきことです。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="メモリ使用量の測定方法"><a class="anchor" href="#メモリ使用量の測定方法"></a>メモリ使用量の測定方法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkusアプリケーションのフットプリントを測定する際には、 <a href="https://en.wikipedia.org/wiki/Resident_set_size">Resident Set Size(RSS)</a> を測定します。JVMのヒープサイズではありません。JVMヒープサイズは全体的な問題のほんの一部です。JVMは、ヒープ用のネイティブメモリ( <code>-Xms</code> , <code>-Xmx</code> )を割り当てるだけでなく、アプリケーションを実行するためにjvmが必要とする構造体も割り当てます。JVMの実装に応じて、アプリケーションに割り当てられる総メモリは、以下のものを含みますが、これに限りません:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ヒープ空間</p>
</li>
<li>
<p>クラスメタデータ</p>
</li>
<li>
<p>スレッドスタック</p>
</li>
<li>
<p>コンパイルされたコード</p>
</li>
<li>
<p>ガベージコレクション</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="ネイティブメモリのトラッキング"><a class="anchor" href="#ネイティブメモリのトラッキング"></a>ネイティブメモリのトラッキング</h3>
<div class="paragraph">
<p>JVMで使用されているネイティブメモリを表示するには、hotspotでNMT( <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/nmt-8.html">Native Memory Tracking</a> )機能を有効にします;</p>
</div>
<div class="paragraph">
<p>コマンドラインでNMTを有効に設定;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-XX:NativeMemoryTracking=[off | summary | detail] <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>注意: この機能は、約 5-10% のパフォーマンスオーバーヘッドを発生させます。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>そして、jcmdを使ってアプリケーションを実行しているHotspot JVMのネイティブメモリ使用量のレポートをダンプすることができます;</p>
</div>
<div class="paragraph">
<p>jcmd &lt;pid&gt; VM.native_memory [summary | detail | baseline | summary.diff | detail.diff | shutdown] [scale= KB | MB | GB] [scale= KB | MB | GB</p>
</div>
</div>
<div class="sect2">
<h3 id="クラウドネイティブのメモリ制限"><a class="anchor" href="#クラウドネイティブのメモリ制限"></a>クラウドネイティブのメモリ制限</h3>
<div class="paragraph">
<p>Cloud Nativeアプリケーションの影響を見るには、メモリ全体を測定することが重要です。特にコンテナ環境では、RSSの全メモリ使用量に基づいてプロセスを強制終了させてしまうことがあるためです。</p>
</div>
<div class="paragraph">
<p>同様に、プロセスが使用している、他のプロセスと共有されないプライベートメモリだけを測定するという罠には陥らないようにしましょう。プライベートメモリは、多くの異なるアプリケーションをデプロイする環境(メモリを多く共有する)では有用かもしれませんが、Kubernetes/OpenShiftのような環境では非常に誤解を招く可能性があります。</p>
</div>
</div>
<div class="sect2">
<h3 id="docker上でメモリを正しく測定する"><a class="anchor" href="#docker上でメモリを正しく測定する"></a>Docker上でメモリを正しく測定する</h3>
<div class="paragraph">
<p>メモリを正しく測定するためには、 <strong>docker statやそれに由来するもの（ctopなど）を使用しないでください</strong> 。この方法では、使用中のレジデントページのサブセットしか測定できません。一方、Linuxカーネル、cgroups、およびクラウドオーケストレーションプロバイダは、アカウンティング（プロセスが制限を超えているかどうか、強制終了すべきかどうかの判断）に完全なレジデントセットを利用します。</p>
</div>
<div class="paragraph">
<p>正確に測定するためには、Linux上でRSSを測定するのと同様の手順を実行する必要があります。docker <code>top</code> コマンドは、コンテナインスタンス内のプロセスに対して、コンテナホストマシン上で <code>ps</code> コマンドを実行することができます。これを出力パラメータのフォーマットと組み合わせて利用することで、RSSの値を返すことができます:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>docker top &lt;CONTAINER ID&gt; -o pid,rss,args</pre>
</div>
</div>
<div class="paragraph">
<p>例えば、以下のようになります:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"> $ docker top $(docker ps -q --filter ancestor=quarkus/myapp) -o pid,rss,args

PID                 RSS                 COMMAND
2531                27m                 ./application -Dquarkus.http.host=0.0.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>また、特権シェル（ホスト上のroot）に直接ジャンプして、 <code>ps</code> コマンドを直接実行することもできます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"> $ docker run -it --rm --privileged --pid=host justincormack/nsenter1 /bin/ps -e -o pid,rss,args | grep application
 2531  27m ./application -Dquarkus.http.host=0.0.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Linuxを使用している場合は、シェルがコンテナホストと同じであるため、 <code>ps</code> コマンドを直接実行することができます:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ps -e -o pid,rss,args | grep application</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="プラットフォーム固有のメモリレポート"><a class="anchor" href="#プラットフォーム固有のメモリレポート"></a>プラットフォーム固有のメモリレポート</h3>
<div class="paragraph">
<p>NVMを有効にして実行する際のパフォーマンスオーバーヘッドを発生させないために、各プラットフォームに特化したツールを使用して、JVMアプリケーションの総RSSを測定します。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Linux</dt>
<dd>
<p>Linux の <a href="https://linux.die.net/man/1/pmap">pmap</a> と <a href="https://linux.die.net/man/1/ps">ps</a> ツールは、プロセスのネイティブメモリマップのレポートを提供します</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"> $ ps -o pid,rss,command -p &lt;pid&gt;

   PID   RSS COMMAND
 11229 12628 ./target/getting-started-1.0.0-SNAPSHOT-runner</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"> $ pmap -x &lt;pid&gt;

 13150:   /data/quarkus-application -Xmx100m -Xmn70m
 Address           Kbytes     RSS   Dirty Mode  Mapping
 0000000000400000   55652   30592       0 r-x-- quarkus-application
 0000000003c58000       4       4       4 r-x-- quarkus-application
 0000000003c59000    5192    4628     748 rwx-- quarkus-application
 00000000054c0000     912     156     156 rwx--   [ anon ]
 ...
 00007fcd13400000    1024    1024    1024 rwx--   [ anon ]
 ...
 00007fcd13952000       8       4       0 r-x-- libfreebl3.so
 ...
 ---------------- ------- ------- -------
 total kB         9726508  256092  220900</code></pre>
</div>
</div>
<div class="paragraph">
<p>プロセスに割り当てられた各メモリ領域が一覧表示されます;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Address: 仮想アドレス空間の開始アドレス</p>
</li>
<li>
<p>Kbytes(キロバイト): 領域用に確保された仮想アドレス空間のサイズ (キロバイト)</p>
</li>
<li>
<p>RSS: レジデントセットサイズ(キロバイト)。これは、実際にどれだけのメモリ領域が使用されているかを示す指標です。</p>
</li>
<li>
<p>Dirty: ダーティなページ (共有およびプライベートの両方) をキロバイト単位で表示します。</p>
</li>
<li>
<p>モード: メモリ領域のアクセスモード</p>
</li>
<li>
<p>マッピング: プロセス用のアプリケーション領域と共有オブジェクト(.so)のマッピングを含む</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Total RSS (kB)の行は、プロセスが使用しているネイティブメモリの合計を報告します。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">macOS</dt>
<dd>
<p>macOSでは、 <code>ps x -o pid,rss,command -p &lt;PID&gt;</code> と指定すると、指定したプロセスのRSSをKB（1024バイト）単位で一覧表示することができます。</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ ps x -o pid,rss,command -p 57160

  PID    RSS COMMAND
57160 288548 /Applications/IntelliJ IDEA CE.app/Contents/jdk/Contents/Home/jre/bin/java</code></pre>
</div>
</div>
<div class="paragraph">
<p>つまり、IntelliJ IDEAは281,8MBのRSSを消費していることになります。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="起動時間の測定方法"><a class="anchor" href="#起動時間の測定方法"></a>起動時間の測定方法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>フレームワークの中には、積極的な遅延初期化技術を使用しているものがあります。フレームワークを起動するのに必要な時間を最も正確に反映するために、最初のリクエストに対する起動時間を測定することは重要です。そうしないと、フレームワークが <em>実際に</em> 初期化に要する時間を見逃してしまいます。</p>
</div>
<div class="paragraph">
<p>ここでは、テストにおける起動時間の測定方法を説明します。</p>
</div>
<div class="paragraph">
<p>アプリケーションのライフサイクルのある時点のタイムスタンプを記録するサンプルアプリケーションを作成します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/")
public class GreetingEndpoint {

    private static final String template = "Hello, %s!";

    @GET
    @Path("/greeting")
    @Produces(MediaType.APPLICATION_JSON)
    public Greeting greeting(@QueryParam("name") String name) {
        System.out.println(new SimpleDateFormat("HH:mm:ss.SSS").format(new java.util.Date(System.currentTimeMillis())));
        String suffix = name != null ? name : "World";
        return new Greeting(String.format(template, suffix));
    }

    void onStart(@Observes StartupEvent startup) {
        System.out.println(new SimpleDateFormat("HH:mm:ss.SSS").format(new Date()));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>シェル内でループを開始し、テストしているサンプルアプリケーションのRESTエンドポイントにリクエストを送信します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ while [[ "$(curl -s -o /dev/null -w ''%{http_code}'' localhost:8080/api/greeting)" != "200" ]]; do sleep .00001; done</code></pre>
</div>
</div>
<div class="paragraph">
<p>別のターミナルで、テストしているタイミングアプリケーションを起動し、アプリケーションが起動した時刻表示します</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ date +"%T.%3N" &amp;&amp;  ./target/quarkus-timing-runner

10:57:32.508
10:57:32.512
2019-04-05 10:57:32,512 INFO  [io.quarkus] (main) Quarkus 0.11.0 started in 0.002s. Listening on: http://127.0.0.1:8080
2019-04-05 10:57:32,512 INFO  [io.quarkus] (main) Installed features: [cdi, resteasy-reactive, resteasy-reactive-jackson]
10:57:32.537</code></pre>
</div>
</div>
<div class="paragraph">
<p>最終タイムスタンプと最初のタイムスタンプの差は、アプリケーションが最初のリクエストにサービスを提供するまでの総起動時間です。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quarkusで適用される追加フラグ"><a class="anchor" href="#quarkusで適用される追加フラグ"></a>Quarkusで適用される追加フラグ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>QuarkusがGraalVM <code>native-image</code> を起動すると、 デフォルトでいくつかの追加フラグが適用されます。</p>
</div>
<div class="paragraph">
<p>他のビルドと性能特性を比較する場合には、以下のようなものを把握しておくとよいです。</p>
</div>
<div class="sect2">
<h3 id="フォールバックイメージの無効化"><a class="anchor" href="#フォールバックイメージの無効化"></a>フォールバックイメージの無効化</h3>
<div class="paragraph">
<p>フォールバックネイティブイメージは、何らかの理由でネイティブコードへのコンパイルに失敗した場合に、通常のJVMでアプリケーションを実行するために「フォールバック」するためのGraalVMの機能です。</p>
</div>
<div class="paragraph">
<p>Quarkusは、 <code>-H:FallbackThreshold=0</code> を設定することでこの機能を無効にします。これは、アプリケーションがネイティブモードで本当に実行できないことに気づかないリスクを冒すのではなく、コンパイルに失敗することを保証します。</p>
</div>
<div class="paragraph">
<p>その代わりに Java モードで実行したい場合は、ネイティブイメージのビルドをスキップして jar として実行することも可能です。</p>
</div>
</div>
<div class="sect2">
<h3 id="分離の無効化"><a class="anchor" href="#分離の無効化"></a>分離の無効化</h3>
<div class="paragraph">
<p>分離はGraalVMの優れた機能ですが、Quarkusは現段階では使用していません。</p>
</div>
<div class="paragraph">
<p><code>-H:-SpawnIsolates</code> で無効化します。</p>
</div>
</div>
<div class="sect2">
<h3 id="すべてのサービスローダー実装の自動登録を無効にする"><a class="anchor" href="#すべてのサービスローダー実装の自動登録を無効にする"></a>すべてのサービスローダー実装の自動登録を無効にする</h3>
<div class="paragraph">
<p>Quarkusのエクステンションでは、必要なサービスを自動的に選択できますが、GraalVMのネイティブイメージは、クラスパス上で見つけることができるすべてのサービスをデフォルトで含めます。</p>
</div>
<div class="paragraph">
<p>より最適化されたバイナリを生成するために、明示的にサービスをリストアップすることをお勧めします。 <code>-H:-UseServiceLoaderFeature</code> により、これを無効にすることも可能です。</p>
</div>
</div>
<div class="sect2">
<h3 id="ガベージコレクション実装のためのより良いデフォルト値"><a class="anchor" href="#ガベージコレクション実装のためのより良いデフォルト値"></a>ガベージコレクション実装のためのより良いデフォルト値</h3>
<div class="paragraph">
<p>GraalVMのデフォルト値は、短命なプロセスに最適化することを意図していると思われます。</p>
</div>
<div class="paragraph">
<p>Quarkusのデフォルトはサーバーアプリケーションになっているので、 <code>-H:InitialCollectionPolicy=com.oracle.svm.core.genscavenge.CollectionPolicy$BySpaceAndTime</code> によってより良いデフォルト値に切り替えています。</p>
</div>
</div>
<div class="sect2">
<h3 id="その他"><a class="anchor" href="#その他"></a>その他&#8230;&#8203;</h3>
<div class="paragraph">
<p>このセクションは、高レベルのガイダンスとして提供されています。フラグの中には、エクステンションや構築しているプラットフォーム、設定の詳細、あなたのコード、そして場合によってはこれらの組み合わせによって動的に制御されものがあるため、このセクションは包括的なものではありません。</p>
</div>
<div class="paragraph">
<p>一般的に言えば、ここに挙げたものはパフォーマンス・メトリクスに影響を与える可能性が高いものですが、適切な状況下では、他のフラグによる影響も無視できないものになるでしょう。</p>
</div>
<div class="paragraph">
<p>差異を詳細に調査する場合は、Quarkusが何を呼び出しているかを正確に確認する必要があります。ビルドプラグインがネイティブイメージを生成する際には、コマンドライン全体がログに記録されます。</p>
</div>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus はオープンです。このプロジェクトの全ての依存関係は<a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>または互換性のあるライセンスの元で利用出来ます。<br /><br />このウェブサイトは <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> で構築されており、<a href='https://pages.github.com/' target='_blank'>Github Pages</a>にホストされており、完全にオープンソースです。改善したい場合、 <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>ウェブサイトをフォークし</a>、修正してみせてください。</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
            <li><a href="/">ホーム</a></li>
          
            <li><a href="/about">Quarkusについて</a></li>
          
            <li><a href="/blog">ブログ</a></li>
          
            <li><a href="/insights">ポッドキャスト</a></li>
          
            <li><a href="/events">イベント</a></li>
          
            <li><a href="/newsletter">ニュースレター</a></li>
          
            <li><a href="/publications">出版</a></li>
          
            <li><a href="/awards">受賞</a></li>
          
            <li><a href="/security">セキュリティポリシー</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォロー</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">Twitter</a></li>
          
            <li><a href="https://www.facebook.com/quarkusio">Facebook</a></li>
          
            <li><a href="https://www.linkedin.com/company/quarkusio/">Linkedin</a></li>
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg">Youtube</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
            <li><a href="/support">サポート</a></li>
          
            <li><a href="/guides">ガイド</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">入門</a></li>
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions">ディスカッション</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">開発メーリングリスト</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>言語</span>
        <ul class="footer-links">
          
            <li><a href="https://quarkus.io/">English</a></li>
          
            <li><a href="https://es.quarkus.io/">Español</a></li>
          
            <li><a href="https://cn.quarkus.io/">简体中文</a></li>
          
            <li><a href="https://ja.quarkus.io/">日本語</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています：</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">等々...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
</body>

</html>
